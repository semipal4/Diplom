## Сценарное автотестирование.
### Необходимые условия для выполнения сценария:

1. Создать пустую тестовую базу 1с и загрузить в нее конфигурацию 

2. Установит расширение "VAExtension" (предназначено для решения ряда технологических задач при запуске автотестов). Его необходимо установить в базу, в которой будет запускаться клиент тестирования. Собранный cfe файл раширения можно скачать [тут] (https://github.com/Pr-Mex/vanessa-automation/releases) или взять в [этом](../VAScript/VAExtension.1.12.cfe) репозиории. В назначении расширения VAExtension выбрать «Дополнение».

3. Проверить/создать в базе данных пользователя Администратор, наделив его ролями «Администратор системы» и «Полные права». Снять галку «Защита от опасных действий» у логина Администратор.
При первом запуске под Администратором проигнорировать предупреждение безопасности *«В целях безопасности рекомендуется запретить открытие внешних отчетов и обработок»* нажав кнопку **Не запрещать**.

4. Запустить клиента под Администратором и добавить профиль пользователя с наименованием «ВКМ_VAExtension», включив в него одну роль «VAExtension_ОсновнаяРоль».

5. Запустить клиента под Администратором, зайти в меню *«Администрирование - Обслуживание – Регламентные операции – Регламентные и фоновые задания»* и открыть ь задание **«Регламентное задание отравить все сообщения в группу телеграмм»**. 

В меню «Расписание» на закладке «Дневное» в поле Повторять через» ввести значение 60 сек.

### Настройка Vanessa Automation:

1. В свойствах запуска клиента в поле *«Дополнительные параметры запуска»* укажите строку 
***/TESTMANAGER /N Администратор /"" /Execute*** *"C:\vanessa-automation\vanessa-automation.epf"* (указав свой путь к файлу vanessa-automation.epf).

2. При запуске Vanessa Automation согласитесь с сообщением о включении использования внешней компоненты VanessaExt.

3. В настройках Vanessa Automation в пункте «Клиенты тестирования создайте профиль запуска клиента «Администратор»

### Настройка и запуск сценариев:

1. Распаковать файл архива scripts.rar, содержащий сценарии автотетсирования для Vanessa-automation.

2. В файле сценария 02_02_НСИ_Константы.feature в разделе «Примеры» указать свои значения для констант:

- Конст - Идентификатор группы для оповещения (ВКМ)'

- Конст - Токен управления телеграм-ботом (ВКМ)'

3. Открыть файл сценария 01_00_НСИ_Пользователи.feature (меню «Загрузить один файл»). Запустить на выполнения (меню «Выполнить» или кнопка F5).

### Результаты работы сценария:

1. Созданы пользователи

|VA-test-Петров, VA-test-Сидоров|роль ВКМ_Специалист|
|---|---| 
|VA-test-Востриков| роль ВКМ_Менеджер |
|VA-test-Степанова| роль ВКМ_Бухгалтер|
|VA-test-Щербакова| роль ВКМ_Кадровик |

2. Заполнены константы

'Конст - Идентификатор группы для оповещения (ВКМ)'

'Конст - Токен управления телеграм-ботом (ВКМ)' 

'Конст - Номенклатура абонентская плата (ВКМ)' 

'Конст - Номенклатура работы специалиста (ВКМ)' 

3. Создана Органицация   VA-test-Головная организация

4. Созданы Контрагенты 

|'VA-test-ООО Крот'| 
|---|---| 
|'VA-test-ЗАО Пилот'| 
|'VA-test-АО Марс'  |
|'VA-test-ИП Калинкин'| 
|'VA-test-ИП Веретенин'|

У каждого контрагента создано по три договора, в т.ч. «Абонентское обслуживание 2025»

5. Внесены условия договора для сотрудников с ролью Специалист.

6. Созданы  5 документов «Обслуживание клиента» (план) на дату 11.03.2025.

7. Закрыты 5 документов «Обслуживание клиента» (факт) на дату 11.03.2025 с тремя видами работ (три строки табличной части).

8. Вызвана процедура массового создания актов, в рамках которой проведена проверка наличия  документов «Реализация товаров  и услуг»  и в случае их отсутствия – созданы документы «Реализация товаров  и услуг»  и «Заказ покупателя».

9. Произведена проверка формирования отчета «Анализ выставленных  актов» за март 2025г по каждому Контрагенту в отдельности.

